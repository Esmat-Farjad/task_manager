<div class="d-flex justify-content-center text-light m-4">
    <h5 class="">
        All Tasks
    </h5>
</div>
{% if messages %}
{% for message in messages %}
<div class="alert alert-success text-center" id="show-message">
    <i class="fa-solid fa-circle-check fs-1 text-success"></i>
    <p class="fw-bold m-0 p-0">Message</p>
    <p class="m-0 p-0">{{message}}</p>
</div>
{% endfor %}
<script>
    setTimeout(()=>{
        document.getElementById("show-message").style.display = "none";
    },3000);
</script>
{% endif %}
<div class="">
    {% if data %}
        <ol class="list-group">
            {% for task in data  %}
                {% if task.status == 1 %}
                    <li class="list-group-item bg-dark my-3 border border-success border-2 border-opacity-50 shadow">
                {% elif task.status == 50 %}
                    <li class="list-group-item bg-dark my-3 border border-warning border-2 border-opacity-50 shadow">
                {% elif task.status == 80 %}
                    <li class="list-group-item bg-dark my-3 border border-warning border-2 shadow">
                {% elif task.status == 100 %}
                    <li class="list-group-item bg-dark my-3 border border-info border-2 border-opacity-50 shadow">
                {% elif task.status == -1 %}
                    <li class="list-group-item bg-dark my-3 border border-danger border-2 border-opacity-50 shadow">
                {% endif %}
                    <div class="bg-dark text-white">
                        <div class="list-title fs-4">{{task.task_name}}</div>
                        <div class="list-body">
                            <small>{{task.task_desc}}</small>
                        </div>
                        <div class=" my-2 border border-secondary shadow py-2 px-1 border-opacity-50">
                            <small class="fw-bold">Assigned By: </small>
                            {% if task.assign_by.get_full_name == '' %}
                                <small class="text-info">Administrator</small>
                            {% else %}
                                <small>{{task.assign_by.get_full_name}}</small>
                                <small>({{task.assign_by.department.department}}) department</small>
                            {% endif %}
                            
                            <small class="fs-6 ms-4">Assigned To: </small><small>{{task.assign_to.get_full_name}}</small>
                            <small>({{task.assign_to.department.department}}) department</small>
                            <small class="fs-6 ms-4"><i class="fa-solid fa-calendar-day"></i>&nbsp;Started Date: </small><small>{{task.start_date}}</small>
                            <small class="fs-6 ms-4"><i class="fa-regular fa-calendar"></i>&nbsp;Expiration Date: </small><small>{{task.end_date}}</small>
                            <small class="fs-6 ms-4">Status: </small>
                            {% if task.status == 1 %}
                                <small class="text-success">Active&nbsp;<i class="fa-regular fa-circle-dot"></i></small>
                                <a href="#modalExample" class="nav-link d-inline ms-4 text-danger" data-bs-toggle="modal" role="button" aria-expanded="false" aria-controls="modalExample">
                                    Remove&nbsp;<i class="fa-solid fa-eraser"></i>
                                </a>
                                <a href="{% url 'taskmanager:manageTask' task.id 'edit' %}" class="nav-link ms-4 text-primary d-inline">edit/Re-assign&nbsp;<i class="fa-regular fa-pen-to-square"></i></a>
                            {% elif task.status == -1 %}
                                <small class="text-danger">Expired&nbsp;<i class="fa-solid fa-triangle-exclamation"></i></small>
                                <a href="#modalExample" class="nav-link d-inline ms-4 text-danger" data-bs-toggle="modal" role="button" aria-expanded="false" aria-controls="modalExample">Remove&nbsp;<i class="fa-solid fa-eraser"></i></a>
                                <a href="{% url 'taskmanager:manageTask' task.id 'edit' %}" class="nav-link ms-4 text-primary d-inline">edit/Re-assign&nbsp;<i class="fa-regular fa-pen-to-square"></i></a>
                            {% elif task.status == 50 %}
                                <span class="progress">
                                    <span class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="50" aria-valuemin="0"
                                        aria-valuemax="100" style="width:50%">
                                        50% completed
                                    </span>
                                </span>
                            {% elif task.status == 100 %}
                                <small class="text-info">Completed&nbsp;<i class="fa-solid fa-circle-check"></i></small>
                                <a href="#modalExample" class="nav-link d-inline ms-4 text-danger" data-bs-toggle="modal" role="button" aria-expanded="false" aria-controls="modalExample">Remove&nbsp;<i class="fa-solid fa-eraser"></i></a>
                                <a href="{% url 'taskmanager:manageTask' task.id 'edit' %}" class="nav-link ms-4 text-primary d-inline">edit/Re-assign&nbsp;<i class="fa-regular fa-pen-to-square"></i></a>
                            {% endif %}
                        </div>
                    </div>
                </li>
                <div class="modal fade " id="modalExample" aria-hidden="true" aria-labelledby="modalHeader" tabindex="-1">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content bg-dark text-white border border-secondary border-opacity-50 py-3 ps-4">
                            <div class="model-header">
                                <h4 class="modal-title fw-bold">Confirmation</h4>
                            </div>
                            <div class="modal-body">
                                <p><i class="fa-solid fa-circle-question"></i>&nbsp;Are you sure you want to delete the Task?</p>
                                <a class="btn px-3 bg-maroon text-white my-3 shadow"
                                    href="{% url 'taskmanager:manageTask' task.id 'Remove' %}">Remove</a>
                                <span class="btn px-3 bg-maroon text-white " data-bs-dismiss="modal">cancel</span>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </ol>
    {% else %}
        <div class="text-center my-5 text-secondary">
            <h1 class="empty-folder"><i class="fa-regular fa-folder-open"></i></h1>
            <h3 class="fw-bold">Oops... ! No Record Found.&nbsp;<i class="fa-solid fa-chart-simple"></i></h3>
        </div>
    {% endif %}
</div>

